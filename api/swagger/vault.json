{
  "swagger": "2.0",
  "info": {
    "version": "v2",
    "title": "Opc-Vault-Service",
    "description": "Azure Industrial IoT OPC UA Vault Service"
  },
  "schemes": [
    "https",
    "http"
  ],
  "paths": {
    "/v2/certificates/{serialNumber}": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get Issuer CA Certificate chain.",
        "operationId": "GetIssuerCertificateChain",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "serialNumber",
            "in": "path",
            "description": "the serial number of the\r\n            Issuer CA Certificate",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/X509CertificateChainApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextPageLink"
        }
      }
    },
    "/v2/certificates/{serialNumber}/crl": {
      "get": {
        "tags": [
          "Certificates"
        ],
        "summary": "Get Issuer CA CRL chain.",
        "operationId": "GetIssuerCrlChain",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "serialNumber",
            "in": "path",
            "description": "the serial number of the Issuer\r\n            CA Certificate",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/X509CrlChainApiModel"
            }
          }
        }
      }
    },
    "/v2/issuer/{serialNumber}": {
      "get": {
        "tags": [
          "Distribution"
        ],
        "summary": "Get Issuer Certificate for Authority Information\r\nAccess endpoint.",
        "operationId": "GetIssuerCertificateChain",
        "consumes": [],
        "produces": [
          "application/pkix-cert"
        ],
        "parameters": [
          {
            "name": "serialNumber",
            "in": "path",
            "description": "",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/v2/crl/{serialNumber}": {
      "get": {
        "tags": [
          "Distribution"
        ],
        "summary": "Get Issuer CRL in CRL Distribution Endpoint.",
        "operationId": "GetIssuerCrlChain",
        "consumes": [],
        "produces": [
          "application/pkix-crl"
        ],
        "parameters": [
          {
            "name": "serialNumber",
            "in": "path",
            "description": "",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/v2/requests/sign": {
      "put": {
        "tags": [
          "Requests"
        ],
        "summary": "Create a certificate request with a certificate signing request (CSR).",
        "description": "The request is in the 'New' state after this call.\r\nRequires Writer or Manager role.",
        "operationId": "StartSigningRequest",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "signingRequest",
            "in": "body",
            "description": "The signing request parameters",
            "required": true,
            "schema": {
              "$ref": "#/definitions/StartSigningRequestApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/StartSigningRequestResponseApiModel"
            }
          }
        }
      }
    },
    "/v2/requests/sign/{requestId}": {
      "get": {
        "tags": [
          "Requests"
        ],
        "summary": "Fetch signing request results.",
        "description": "Can be called in any state.\r\nAfter a successful fetch in 'Completed' state, the request is\r\nmoved into 'Accepted' state.\r\nRequires Writer role.",
        "operationId": "FinishSigningRequest",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "description": "",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/FinishSigningRequestResponseApiModel"
            }
          }
        }
      }
    },
    "/v2/requests/keypair": {
      "put": {
        "tags": [
          "Requests"
        ],
        "summary": "Create a certificate request with a new key pair.",
        "description": "The request is in the 'New' state after this call.\r\nRequires Writer or Manager role.",
        "operationId": "StartNewKeyPairRequest",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "newKeyPairRequest",
            "in": "body",
            "description": "The new key pair request parameters",
            "required": true,
            "schema": {
              "$ref": "#/definitions/StartNewKeyPairRequestApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/StartNewKeyPairRequestResponseApiModel"
            }
          }
        }
      }
    },
    "/v2/requests/keypair/{requestId}": {
      "get": {
        "tags": [
          "Requests"
        ],
        "summary": "Fetch certificate request result.",
        "description": "Can be called in any state.\r\nFetches private key in 'Completed' state.\r\nAfter a successful fetch in 'Completed' state, the request is\r\nmoved into 'Accepted' state.\r\nRequires Writer role.",
        "operationId": "FinishNewKeyPairRequest",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "description": "",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/FinishNewKeyPairRequestResponseApiModel"
            }
          }
        }
      }
    },
    "/v2/requests/{requestId}/approve": {
      "post": {
        "tags": [
          "Requests"
        ],
        "summary": "Approve the certificate request.",
        "description": " Validates the request with the application database.\r\n- If Approved:\r\n  - New Key Pair request: Creates the new key pair\r\n        in the requested format, signs the certificate and stores the\r\n        private key for later securely in KeyVault.\r\n  - Cert Signing Request: Creates and signs the certificate.\r\n        Deletes the CSR from the database.\r\n Stores the signed certificate for later use in the Database.\r\n The request is in the 'Approved' or 'Rejected' state after this call.\r\n Requires Approver role.\r\n Approver needs signing rights in KeyVault.",
        "operationId": "ApproveRequest",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "description": "The certificate request id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/v2/requests/{requestId}/reject": {
      "post": {
        "tags": [
          "Requests"
        ],
        "summary": "Reject the certificate request.",
        "description": "The request is in the 'Rejected' state after this call.\r\nRequires Approver role.\r\nApprover needs signing rights in KeyVault.",
        "operationId": "RejectRequest",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "description": "The certificate request id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/v2/requests/{requestId}/accept": {
      "post": {
        "tags": [
          "Requests"
        ],
        "summary": "Cancel request",
        "description": "The request is in the 'Accepted' state after this call.\r\nRequires Writer role.",
        "operationId": "AcceptRequest",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "description": "The certificate request id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/v2/requests/{requestId}": {
      "get": {
        "tags": [
          "Requests"
        ],
        "summary": "Get a specific certificate request.",
        "operationId": "GetRequest",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "description": "The certificate request id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/CertificateRequestRecordApiModel"
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Requests"
        ],
        "summary": "Delete request. Physically delete the request.",
        "description": "By purging the request it is actually physically deleted from the\r\ndatabase, including the public key and other information.\r\nRequires Manager role.",
        "operationId": "DeleteRequest",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "requestId",
            "in": "path",
            "description": "The certificate request id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/v2/requests/query": {
      "post": {
        "tags": [
          "Requests"
        ],
        "summary": "Query for certificate requests.",
        "description": "Get all certificate requests in paged form.\r\nThe returned model can contain a link to the next page if more results are\r\navailable.  Use ListRequests to continue.",
        "operationId": "QueryRequests",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "query",
            "in": "body",
            "description": "optional, query filter",
            "required": false,
            "schema": {
              "$ref": "#/definitions/CertificateRequestQueryRequestApiModel"
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "optional, the maximum number of result per page",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/CertificateRequestQueryResponseApiModel"
            }
          }
        }
      }
    },
    "/v2/requests": {
      "get": {
        "tags": [
          "Requests"
        ],
        "summary": "Lists certificate requests.",
        "description": "Get all certificate requests in paged form or continue a current listing or\r\nquery.\r\nThe returned model can contain a link to the next page if more results are\r\navailable.",
        "operationId": "ListRequests",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "nextPageLink",
            "in": "query",
            "description": "optional, link to next page",
            "required": false,
            "type": "string"
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "optional, the maximum number of result per page",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/CertificateRequestQueryResponseApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextPageLink"
        }
      }
    },
    "/v2/status": {
      "get": {
        "tags": [
          "Status"
        ],
        "summary": "Get the status.",
        "operationId": "GetStatus",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/StatusResponseApiModel"
            }
          }
        }
      }
    },
    "/v2/groups": {
      "get": {
        "tags": [
          "TrustGroups"
        ],
        "summary": "Get information about all groups.",
        "description": "A trust group has a root certificate which issues certificates\r\nto entities.  Entities can be part of a trust group and thus\r\ntrust the root certificate and all entities that the root has\r\nissued certificates for.",
        "operationId": "ListGroups",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "nextPageLink",
            "in": "query",
            "description": "optional, link to next page",
            "required": false,
            "type": "string"
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "optional, the maximum number of result per page",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TrustGroupRegistrationListApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextPageLink"
        }
      },
      "put": {
        "tags": [
          "TrustGroups"
        ],
        "summary": "Create new sub-group of an existing group.",
        "description": "Requires manager role.",
        "operationId": "CreateGroup",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "request",
            "in": "body",
            "description": "The create request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/TrustGroupRegistrationRequestApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TrustGroupRegistrationResponseApiModel"
            }
          }
        }
      }
    },
    "/v2/groups/{groupId}": {
      "get": {
        "tags": [
          "TrustGroups"
        ],
        "summary": "Get group information.",
        "description": "A trust group has a root certificate which issues certificates\r\nto entities.  Entities can be part of a trust group and thus\r\ntrust the root certificate and all entities that the root has\r\nissued certificates for.",
        "operationId": "GetGroup",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "description": "The group id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TrustGroupRegistrationApiModel"
            }
          }
        }
      },
      "post": {
        "tags": [
          "TrustGroups"
        ],
        "summary": "Update group registration.",
        "description": "Use this function with care and only if you are aware of\r\nthe security implications.\r\nRequires manager role.",
        "operationId": "UpdateGroup",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "description": "The group id",
            "required": true,
            "type": "string"
          },
          {
            "name": "request",
            "in": "body",
            "description": "The group configuration",
            "required": true,
            "schema": {
              "$ref": "#/definitions/TrustGroupUpdateRequestApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      },
      "delete": {
        "tags": [
          "TrustGroups"
        ],
        "summary": "Delete a group.",
        "description": "After this operation the Issuer CA, CRLs and keys become inaccessible.\r\nUse this function with extreme caution.\r\nRequires manager role.",
        "operationId": "DeleteGroup",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "description": "The group id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/v2/groups/root": {
      "put": {
        "tags": [
          "TrustGroups"
        ],
        "summary": "Create new root group.",
        "description": "Requires manager role.",
        "operationId": "CreateRoot",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "request",
            "in": "body",
            "description": "The create request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/TrustGroupRootCreateRequestApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TrustGroupRegistrationResponseApiModel"
            }
          }
        }
      }
    },
    "/v2/groups/{groupId}/renew": {
      "post": {
        "tags": [
          "TrustGroups"
        ],
        "summary": "Renew a group CA Certificate.",
        "operationId": "RenewIssuerCertificate",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "description": "",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/v2/trustlists/{entityId}/{trustedEntityId}": {
      "put": {
        "tags": [
          "TrustLists"
        ],
        "summary": "Add trust relationship",
        "description": "Define trust between two entities.  The entities are identifiers\r\nof application, groups, or endpoints.",
        "operationId": "AddTrustRelationship",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "The entity identifier, e.g. group, etc.",
            "required": true,
            "type": "string"
          },
          {
            "name": "trustedEntityId",
            "in": "path",
            "description": "The trusted entity identifier",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/v2/trustlists/{entityId}": {
      "get": {
        "tags": [
          "TrustLists"
        ],
        "summary": "List trusted certificates",
        "description": "Returns all certificates the entity should trust based on the\r\napplied trust configuration.",
        "operationId": "ListTrustedCertificates",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "",
            "required": true,
            "type": "string"
          },
          {
            "name": "nextPageLink",
            "in": "query",
            "description": "optional, link to next page",
            "required": false,
            "type": "string"
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "optional, the maximum number of result per page",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/X509CertificateListApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "nextPageLink"
        }
      }
    },
    "/v2/trustlists/{entityId}/{untrustedEntityId}": {
      "delete": {
        "tags": [
          "TrustLists"
        ],
        "summary": "Remove a trust relationship",
        "description": "Removes trust between two entities.  The entities are identifiers\r\nof application, groups, or endpoints.",
        "operationId": "RemoveTrustRelationship",
        "consumes": [],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "entityId",
            "in": "path",
            "description": "The entity identifier, e.g. group, etc.",
            "required": true,
            "type": "string"
          },
          {
            "name": "untrustedEntityId",
            "in": "path",
            "description": "The trusted entity identifier",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    }
  },
  "definitions": {
    "X509CertificateChainApiModel": {
      "description": "Certificate chain",
      "type": "object",
      "properties": {
        "chain": {
          "description": "Chain",
          "uniqueItems": false,
          "type": "array",
          "items": {
            "$ref": "#/definitions/X509CertificateApiModel"
          }
        }
      }
    },
    "X509CertificateApiModel": {
      "description": "Certificate model",
      "required": [
        "certificate"
      ],
      "type": "object",
      "properties": {
        "subject": {
          "description": "Subject",
          "type": "string"
        },
        "thumbprint": {
          "description": "Thumbprint",
          "type": "string"
        },
        "serialNumber": {
          "description": "Serial number",
          "type": "string"
        },
        "notBeforeUtc": {
          "format": "date-time",
          "description": "Not before validity",
          "type": "string"
        },
        "notAfterUtc": {
          "format": "date-time",
          "description": "Not after validity",
          "type": "string"
        },
        "certificate": {
          "description": "Raw data",
          "type": "object"
        }
      }
    },
    "X509CrlChainApiModel": {
      "description": "Crl collection model",
      "type": "object",
      "properties": {
        "chain": {
          "description": "Chain",
          "uniqueItems": false,
          "type": "array",
          "items": {
            "$ref": "#/definitions/X509CrlApiModel"
          }
        }
      }
    },
    "X509CrlApiModel": {
      "description": "A X509 certificate revocation list.",
      "required": [
        "crl"
      ],
      "type": "object",
      "properties": {
        "issuer": {
          "description": "The Issuer name of the revocation list.",
          "type": "string"
        },
        "crl": {
          "description": "The certificate revocation list.",
          "type": "object"
        }
      }
    },
    "StartSigningRequestApiModel": {
      "description": "Signing request",
      "required": [
        "entityId",
        "groupId",
        "certificateRequest"
      ],
      "type": "object",
      "properties": {
        "entityId": {
          "description": "Id of entity to sign a certificate for",
          "type": "string"
        },
        "groupId": {
          "description": "Certificate group id",
          "type": "string"
        },
        "certificateRequest": {
          "description": "Request",
          "type": "object"
        }
      }
    },
    "StartSigningRequestResponseApiModel": {
      "description": "Signing request response",
      "required": [
        "requestId"
      ],
      "type": "object",
      "properties": {
        "requestId": {
          "description": "Request id",
          "type": "string"
        }
      }
    },
    "FinishSigningRequestResponseApiModel": {
      "description": "Finish request results",
      "type": "object",
      "properties": {
        "request": {
          "$ref": "#/definitions/CertificateRequestRecordApiModel",
          "description": "Request"
        },
        "certificate": {
          "$ref": "#/definitions/X509CertificateApiModel",
          "description": "Signed certificate"
        }
      }
    },
    "CertificateRequestRecordApiModel": {
      "description": "Certificate request record model",
      "type": "object",
      "properties": {
        "requestId": {
          "description": "Request id",
          "type": "string"
        },
        "entityId": {
          "description": "Application id",
          "type": "string"
        },
        "groupId": {
          "description": "Trust group",
          "type": "string"
        },
        "state": {
          "description": "Request state",
          "enum": [
            "New",
            "Approved",
            "Rejected",
            "Failure",
            "Completed",
            "Accepted"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "CertificateRequestState",
            "modelAsString": false
          }
        },
        "type": {
          "description": "Request type",
          "enum": [
            "SigningRequest",
            "KeyPairRequest"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "CertificateRequestType",
            "modelAsString": false
          }
        },
        "errorInfo": {
          "description": "Error diagnostics",
          "type": "object"
        },
        "submitted": {
          "$ref": "#/definitions/VaultOperationContextApiModel",
          "description": "Request time"
        },
        "approved": {
          "$ref": "#/definitions/VaultOperationContextApiModel",
          "description": "Approved or rejected"
        },
        "accepted": {
          "$ref": "#/definitions/VaultOperationContextApiModel",
          "description": "Finished"
        }
      }
    },
    "VaultOperationContextApiModel": {
      "description": "Vault operation log model",
      "required": [
        "time"
      ],
      "type": "object",
      "properties": {
        "authorityId": {
          "description": "User",
          "type": "string"
        },
        "time": {
          "format": "date-time",
          "description": "Operation time",
          "type": "string"
        }
      }
    },
    "StartNewKeyPairRequestApiModel": {
      "description": "New key pair request",
      "required": [
        "entityId",
        "groupId",
        "certificateType",
        "subjectName"
      ],
      "type": "object",
      "properties": {
        "entityId": {
          "description": "Entity id",
          "type": "string"
        },
        "groupId": {
          "description": "Certificate group",
          "type": "string"
        },
        "certificateType": {
          "description": "Type",
          "enum": [
            "ApplicationInstanceCertificate",
            "HttpsCertificate",
            "UserCredentialCertificate"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "TrustGroupType",
            "modelAsString": false
          }
        },
        "subjectName": {
          "description": "Subject name",
          "type": "string"
        },
        "domainNames": {
          "description": "Domain names",
          "uniqueItems": false,
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "StartNewKeyPairRequestResponseApiModel": {
      "description": "New key pair response",
      "required": [
        "requestId"
      ],
      "type": "object",
      "properties": {
        "requestId": {
          "description": "Request id",
          "type": "string"
        }
      }
    },
    "FinishNewKeyPairRequestResponseApiModel": {
      "description": "Finish request results",
      "type": "object",
      "properties": {
        "request": {
          "$ref": "#/definitions/CertificateRequestRecordApiModel",
          "description": "Request"
        },
        "certificate": {
          "$ref": "#/definitions/X509CertificateApiModel",
          "description": "Signed certificate"
        },
        "privateKey": {
          "$ref": "#/definitions/PrivateKeyApiModel",
          "description": "Private key"
        }
      }
    },
    "PrivateKeyApiModel": {
      "description": "Private key",
      "type": "object",
      "properties": {
        "kty": {
          "description": "Key type",
          "enum": [
            "RSA",
            "ECC",
            "AES"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "PrivateKeyType",
            "modelAsString": false
          }
        },
        "n": {
          "format": "byte",
          "description": "RSA modulus.",
          "type": "string"
        },
        "e": {
          "format": "byte",
          "description": "RSA public exponent, in Base64.",
          "type": "string"
        },
        "dp": {
          "format": "byte",
          "description": "RSA Private Key Parameter",
          "type": "string"
        },
        "dq": {
          "format": "byte",
          "description": "RSA Private Key Parameter",
          "type": "string"
        },
        "qi": {
          "format": "byte",
          "description": "RSA Private Key Parameter",
          "type": "string"
        },
        "p": {
          "format": "byte",
          "description": "RSA secret prime",
          "type": "string"
        },
        "q": {
          "format": "byte",
          "description": "RSA secret prime, with p &lt; q",
          "type": "string"
        },
        "crv": {
          "description": "The curve for ECC algorithms",
          "type": "string"
        },
        "x": {
          "format": "byte",
          "description": "X coordinate for the Elliptic Curve point.",
          "type": "string"
        },
        "y": {
          "format": "byte",
          "description": "Y coordinate for the Elliptic Curve point.",
          "type": "string"
        },
        "d": {
          "format": "byte",
          "description": "RSA private exponent or ECC private key.",
          "type": "string"
        },
        "k": {
          "format": "byte",
          "description": "Symmetric key",
          "type": "string"
        },
        "key_hsm": {
          "format": "byte",
          "description": "HSM Token, used with \"Bring Your Own Key\"",
          "type": "string"
        }
      }
    },
    "CertificateRequestQueryRequestApiModel": {
      "description": "Certificate request query model",
      "type": "object",
      "properties": {
        "entityId": {
          "description": "The entity id to filter with",
          "type": "string"
        },
        "state": {
          "description": "The certificate request state",
          "enum": [
            "New",
            "Approved",
            "Rejected",
            "Failure",
            "Completed",
            "Accepted"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "CertificateRequestState",
            "modelAsString": false
          }
        }
      }
    },
    "CertificateRequestQueryResponseApiModel": {
      "description": "Response model",
      "type": "object",
      "properties": {
        "requests": {
          "description": "The query result.",
          "uniqueItems": false,
          "type": "array",
          "items": {
            "$ref": "#/definitions/CertificateRequestRecordApiModel"
          }
        },
        "nextPageLink": {
          "description": "Link to the next page of results.",
          "type": "string"
        }
      }
    },
    "StatusResponseApiModel": {
      "description": "Status model",
      "type": "object",
      "properties": {
        "name": {
          "description": "Service name",
          "type": "string"
        },
        "status": {
          "description": "Status",
          "type": "string"
        },
        "currentTime": {
          "description": "Current time",
          "type": "string",
          "readOnly": true
        },
        "startTime": {
          "description": "Service start time",
          "type": "string",
          "readOnly": true
        },
        "upTime": {
          "format": "int64",
          "description": "Uptime",
          "type": "integer",
          "readOnly": true
        },
        "uid": {
          "description": "Value generated at bootstrap by each instance of the service and\r\nused to correlate logs coming from the same instance. The value\r\nchanges every time the service starts.",
          "type": "string",
          "readOnly": true
        },
        "properties": {
          "description": "A property bag with details about the service",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "readOnly": true
        },
        "dependencies": {
          "description": "A property bag with details about the internal dependencies",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "readOnly": true
        },
        "$metadata": {
          "description": "Meta data",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "readOnly": true
        }
      }
    },
    "TrustGroupRegistrationListApiModel": {
      "description": "Trust group registration collection model",
      "type": "object",
      "properties": {
        "registrations": {
          "description": "Group registrations",
          "uniqueItems": false,
          "type": "array",
          "items": {
            "$ref": "#/definitions/TrustGroupRegistrationApiModel"
          }
        },
        "nextPageLink": {
          "description": "Next link",
          "type": "string"
        }
      }
    },
    "TrustGroupRegistrationApiModel": {
      "description": "Trust group registration model",
      "required": [
        "id",
        "group"
      ],
      "type": "object",
      "properties": {
        "id": {
          "description": "The registered id of the trust group",
          "type": "string"
        },
        "group": {
          "$ref": "#/definitions/TrustGroupApiModel",
          "description": "Trust group"
        }
      }
    },
    "TrustGroupApiModel": {
      "description": "Trust group model",
      "required": [
        "name",
        "subjectName"
      ],
      "type": "object",
      "properties": {
        "name": {
          "description": "The name of the trust group.",
          "type": "string"
        },
        "parentId": {
          "description": "The identifer of the parent trust group.",
          "type": "string"
        },
        "type": {
          "description": "The trust group type",
          "default": "ApplicationInstanceCertificate",
          "enum": [
            "ApplicationInstanceCertificate",
            "HttpsCertificate",
            "UserCredentialCertificate"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "TrustGroupType",
            "modelAsString": false
          }
        },
        "subjectName": {
          "description": "The subject name of the group as distinguished name.",
          "type": "string"
        },
        "lifetime": {
          "description": "The lifetime of the trust group certificate.",
          "type": "string"
        },
        "keySize": {
          "format": "int32",
          "description": "The trust group certificate key size in bits.",
          "type": "integer"
        },
        "signatureAlgorithm": {
          "description": "The certificate signature algorithm.",
          "enum": [
            "Rsa256",
            "Rsa384",
            "Rsa512",
            "Rsa256Pss",
            "Rsa384Pss",
            "Rsa512Pss"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "SignatureAlgorithm",
            "modelAsString": false
          }
        },
        "issuedLifetime": {
          "description": "The issued certificate lifetime in months.",
          "type": "string"
        },
        "issuedKeySize": {
          "format": "int32",
          "description": "The issued certificate key size in bits.",
          "type": "integer"
        },
        "issuedSignatureAlgorithm": {
          "description": "The Signature algorithm for issued certificates",
          "enum": [
            "Rsa256",
            "Rsa384",
            "Rsa512",
            "Rsa256Pss",
            "Rsa384Pss",
            "Rsa512Pss"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "SignatureAlgorithm",
            "modelAsString": false
          }
        }
      }
    },
    "TrustGroupRegistrationRequestApiModel": {
      "description": "Trust group registration request model",
      "required": [
        "name",
        "parentId",
        "subjectName"
      ],
      "type": "object",
      "properties": {
        "name": {
          "description": "The new name of the trust group",
          "type": "string"
        },
        "parentId": {
          "description": "The identifer of the parent trust group.",
          "type": "string"
        },
        "subjectName": {
          "description": "The subject name of the group as distinguished name.",
          "type": "string"
        },
        "issuedLifetime": {
          "description": "The lifetime of certificates issued in the group.",
          "type": "string"
        },
        "issuedKeySize": {
          "format": "int32",
          "description": "The issued certificate key size in bits.",
          "type": "integer"
        },
        "issuedSignatureAlgorithm": {
          "description": "The issued certificate signature algorithm.",
          "enum": [
            "Rsa256",
            "Rsa384",
            "Rsa512",
            "Rsa256Pss",
            "Rsa384Pss",
            "Rsa512Pss"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "SignatureAlgorithm",
            "modelAsString": false
          }
        }
      }
    },
    "TrustGroupRegistrationResponseApiModel": {
      "description": "Trust group registration response model",
      "required": [
        "id"
      ],
      "type": "object",
      "properties": {
        "id": {
          "description": "The id of the trust group",
          "type": "string"
        }
      }
    },
    "TrustGroupUpdateRequestApiModel": {
      "description": "Trust group update model",
      "type": "object",
      "properties": {
        "name": {
          "description": "The name of the trust group",
          "type": "string"
        },
        "issuedLifetime": {
          "description": "The issued certificate lifetime.",
          "type": "string"
        },
        "issuedKeySize": {
          "format": "int32",
          "description": "The issued certificate key size in bits.",
          "type": "integer"
        },
        "issuedSignatureAlgorithm": {
          "description": "The issued certificate key size in bits.",
          "enum": [
            "Rsa256",
            "Rsa384",
            "Rsa512",
            "Rsa256Pss",
            "Rsa384Pss",
            "Rsa512Pss"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "SignatureAlgorithm",
            "modelAsString": false
          }
        }
      }
    },
    "TrustGroupRootCreateRequestApiModel": {
      "description": "Trust group root registration model",
      "required": [
        "name",
        "subjectName",
        "lifetime"
      ],
      "type": "object",
      "properties": {
        "name": {
          "description": "The new name of the trust group root",
          "type": "string"
        },
        "type": {
          "description": "The trust group type.",
          "default": "ApplicationInstanceCertificate",
          "enum": [
            "ApplicationInstanceCertificate",
            "HttpsCertificate",
            "UserCredentialCertificate"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "TrustGroupType",
            "modelAsString": false
          }
        },
        "subjectName": {
          "description": "The subject name of the group as distinguished name.",
          "type": "string"
        },
        "lifetime": {
          "description": "The lifetime of the trust group root certificate.",
          "type": "string"
        },
        "keySize": {
          "format": "int32",
          "description": "The certificate key size in bits.",
          "type": "integer"
        },
        "signatureAlgorithm": {
          "description": "The certificate signature algorithm.",
          "enum": [
            "Rsa256",
            "Rsa384",
            "Rsa512",
            "Rsa256Pss",
            "Rsa384Pss",
            "Rsa512Pss"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "SignatureAlgorithm",
            "modelAsString": false
          }
        },
        "issuedLifetime": {
          "description": "The issued certificate lifetime.",
          "type": "string"
        },
        "issuedKeySize": {
          "format": "int32",
          "description": "The issued certificate key size in bits.",
          "type": "integer"
        },
        "issuedSignatureAlgorithm": {
          "description": "The issued certificate signature algorithm.",
          "enum": [
            "Rsa256",
            "Rsa384",
            "Rsa512",
            "Rsa256Pss",
            "Rsa384Pss",
            "Rsa512Pss"
          ],
          "type": "string",
          "x-ms-enum": {
            "name": "SignatureAlgorithm",
            "modelAsString": false
          }
        }
      }
    },
    "X509CertificateListApiModel": {
      "description": "Certificate list",
      "type": "object",
      "properties": {
        "certificates": {
          "description": "Certificates",
          "uniqueItems": false,
          "type": "array",
          "items": {
            "$ref": "#/definitions/X509CertificateApiModel"
          }
        },
        "nextPageLink": {
          "description": "Next link",
          "type": "string"
        }
      }
    }
  },
  "tags": [
    {
      "name": "Certificates",
      "description": "Certificate services."
    },
    {
      "name": "Distribution",
      "description": "Certificate CRL Distribution Point and Authority\r\nInformation Access\r\nservices."
    },
    {
      "name": "Requests",
      "description": "Certificate request services."
    },
    {
      "name": "Status",
      "description": "The status service."
    },
    {
      "name": "TrustGroups",
      "description": "Trust group services."
    },
    {
      "name": "TrustLists",
      "description": "Trust lists services."
    }
  ]
}