{
  "swagger": "2.0",
  "info": {
    "title": "Opc-Registry-Service",
    "description": "Azure Industrial IoT OPC UA Registry Service",
    "contact": {
      "url": "https://www.github.com/Azure/Industrial-IoT"
    },
    "license": {
      "name": "MIT LICENSE",
      "url": "https://opensource.org/licenses/MIT"
    },
    "version": "v2"
  },
  "host": "localhost:9080",
  "schemes": [
    "http",
    "https"
  ],
  "paths": {
    "/registry/v2/applications": {
      "post": {
        "tags": [
          "Applications"
        ],
        "summary": "Register new server",
        "description": "Registers a server solely using a discovery url. Requires that the onboarding agent service is running and the server can be located by a supervisor in its network using the discovery url.",
        "operationId": "RegisterServer",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Server registration request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ServerRegistrationRequestApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      },
      "put": {
        "tags": [
          "Applications"
        ],
        "summary": "Create new application",
        "description": "The application is registered using the provided information, but it is not associated with a supervisor. This is useful for when you need to register clients or you want to register a server that is located in a network not reachable through a Twin module.",
        "operationId": "CreateApplication",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Application registration request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ApplicationRegistrationRequestApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/ApplicationRegistrationResponseApiModel"
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Applications"
        ],
        "summary": "Purge applications",
        "description": "Purges all applications that have not been seen for a specified amount of time.",
        "operationId": "DeleteAllDisabledApplications",
        "parameters": [
          {
            "in": "query",
            "name": "notSeenFor",
            "description": "A duration in milliseconds",
            "type": "string",
            "format": "date-span"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      },
      "get": {
        "tags": [
          "Applications"
        ],
        "summary": "Get list of applications",
        "description": "Get all registered applications in paged form. The returned model can contain a continuation token if more results are available. Call this operation again using the token to retrieve more results.",
        "operationId": "GetListOfApplications",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "continuationToken",
            "description": "Optional Continuation token",
            "type": "string"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Optional number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/ApplicationInfoListApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "continuationToken"
        }
      }
    },
    "/registry/v2/applications/{applicationId}/disable": {
      "post": {
        "tags": [
          "Applications"
        ],
        "summary": "Disable an enabled application.",
        "description": "A manager can disable an application.",
        "operationId": "DisableApplication",
        "parameters": [
          {
            "in": "path",
            "name": "applicationId",
            "description": "The application id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/applications/{applicationId}/enable": {
      "post": {
        "tags": [
          "Applications"
        ],
        "summary": "Re-enable a disabled application.",
        "description": "A manager can enable an application.",
        "operationId": "EnableApplication",
        "parameters": [
          {
            "in": "path",
            "name": "applicationId",
            "description": "The application id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/applications/discover": {
      "post": {
        "tags": [
          "Applications"
        ],
        "summary": "Discover servers",
        "description": "Registers servers by running a discovery scan in a supervisor's network. Requires that the onboarding agent service is running.",
        "operationId": "DiscoverServer",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Discovery request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DiscoveryRequestApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/applications/discover/{requestId}": {
      "delete": {
        "tags": [
          "Applications"
        ],
        "summary": "Cancel discovery",
        "description": "Cancels a discovery request using the request identifier.",
        "operationId": "Cancel",
        "parameters": [
          {
            "in": "path",
            "name": "requestId",
            "description": "Discovery request",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/applications/{applicationId}": {
      "get": {
        "tags": [
          "Applications"
        ],
        "summary": "Get application registration",
        "operationId": "GetApplicationRegistration",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "applicationId",
            "description": "Application id for the server",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/ApplicationRegistrationApiModel"
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Applications"
        ],
        "summary": "Update application registration",
        "description": "The application information is updated with new properties. Note that this information might be overridden if the application is re-discovered during a discovery run (recurring or one-time).",
        "operationId": "UpdateApplicationRegistration",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "applicationId",
            "description": "The identifier of the application",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Application update request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ApplicationRegistrationUpdateApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      },
      "delete": {
        "tags": [
          "Applications"
        ],
        "summary": "Unregister application",
        "description": "Unregisters and deletes application and all its associated endpoints.",
        "operationId": "DeleteApplication",
        "parameters": [
          {
            "in": "path",
            "name": "applicationId",
            "description": "The identifier of the application",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/applications/sites": {
      "get": {
        "tags": [
          "Applications"
        ],
        "summary": "Get list of sites",
        "description": "List all sites applications are registered in.",
        "operationId": "GetListOfSites",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "continuationToken",
            "description": "Optional Continuation token",
            "type": "string"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Optional number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/ApplicationSiteListApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "continuationToken"
        }
      }
    },
    "/registry/v2/applications/query": {
      "post": {
        "tags": [
          "Applications"
        ],
        "summary": "Query applications",
        "description": "List applications that match a query model. The returned model can contain a continuation token if more results are available. Call the GetListOfApplications operation using the token to retrieve more results.",
        "operationId": "QueryApplications",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "pageSize",
            "description": "Optional number of results to return",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Application query",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ApplicationRegistrationQueryApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/ApplicationInfoListApiModel"
            }
          }
        }
      },
      "get": {
        "tags": [
          "Applications"
        ],
        "summary": "Get filtered list of applications",
        "description": "Get a list of applications filtered using the specified query parameters. The returned model can contain a continuation token if more results are available. Call the GetListOfApplications operation using the token to retrieve more results.",
        "operationId": "GetFilteredListOfApplications",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "pageSize",
            "description": "Number of results to return",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Applications Query model",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ApplicationRegistrationQueryApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/ApplicationInfoListApiModel"
            }
          }
        }
      }
    },
    "/registry/v2/discovery/{discovererId}": {
      "get": {
        "tags": [
          "Discovery"
        ],
        "summary": "Get discoverer registration information",
        "description": "Returns a discoverer's registration and connectivity information. A discoverer id corresponds to the twin modules module identity.",
        "operationId": "GetDiscoverer",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "discovererId",
            "description": "Discoverer identifier",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DiscovererApiModel"
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Discovery"
        ],
        "summary": "Update discoverer information",
        "description": "Allows a caller to configure recurring discovery runs on the twin module identified by the discoverer id or update site information.",
        "operationId": "UpdateDiscoverer",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "discovererId",
            "description": "discoverer identifier",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Patch request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DiscovererUpdateApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      },
      "post": {
        "tags": [
          "Discovery"
        ],
        "summary": "Enable server discovery",
        "description": "Allows a caller to configure recurring discovery runs on the discovery module identified by the module id.",
        "operationId": "SetDiscoveryMode",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "discovererId",
            "description": "discoverer identifier",
            "required": true,
            "type": "string"
          },
          {
            "in": "query",
            "name": "mode",
            "description": "Discovery mode",
            "required": true,
            "type": "string",
            "enum": [
              "Off",
              "Local",
              "Network",
              "Fast",
              "Scan"
            ],
            "x-ms-enum": {
              "name": "DiscoveryMode",
              "modelAsString": false
            }
          },
          {
            "in": "body",
            "name": "body",
            "description": "Discovery configuration",
            "schema": {
              "$ref": "#/definitions/DiscoveryConfigApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/discovery": {
      "get": {
        "tags": [
          "Discovery"
        ],
        "summary": "Get list of discoverers",
        "description": "Get all registered discoverers and therefore twin modules in paged form. The returned model can contain a continuation token if more results are available. Call this operation again using the token to retrieve more results.",
        "operationId": "GetListOfDiscoverers",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "continuationToken",
            "description": "Optional Continuation token",
            "type": "string"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Optional number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DiscovererListApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "continuationToken"
        }
      }
    },
    "/registry/v2/discovery/query": {
      "post": {
        "tags": [
          "Discovery"
        ],
        "summary": "Query discoverers",
        "description": "Get all discoverers that match a specified query. The returned model can contain a continuation token if more results are available. Call the GetListOfDiscoverers operation using the token to retrieve more results.",
        "operationId": "QueryDiscoverers",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "pageSize",
            "description": "Number of results to return",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Discoverers query model",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DiscovererQueryApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DiscovererListApiModel"
            }
          }
        }
      },
      "get": {
        "tags": [
          "Discovery"
        ],
        "summary": "Get filtered list of discoverers",
        "description": "Get a list of discoverers filtered using the specified query parameters. The returned model can contain a continuation token if more results are available. Call the GetListOfDiscoverers operation using the token to retrieve more results.",
        "operationId": "GetFilteredListOfDiscoverers",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "siteId",
            "description": "Site of the discoverer",
            "type": "string"
          },
          {
            "in": "query",
            "name": "discovery",
            "description": "Discovery mode of discoverer",
            "type": "string",
            "enum": [
              "Off",
              "Local",
              "Network",
              "Fast",
              "Scan"
            ],
            "x-ms-enum": {
              "name": "DiscoveryMode",
              "modelAsString": false
            }
          },
          {
            "in": "query",
            "name": "connected",
            "description": "Included connected or disconnected",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/DiscovererListApiModel"
            }
          }
        }
      }
    },
    "/registry/v2/endpoints/{endpointId}/certificate": {
      "get": {
        "tags": [
          "Endpoints"
        ],
        "summary": "Get endpoint certificate chain",
        "description": "Gets current certificate of the endpoint.",
        "operationId": "GetEndpointCertificate",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "endpointId",
            "description": "endpoint identifier",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/X509CertificateChainApiModel"
            }
          }
        }
      }
    },
    "/registry/v2/endpoints/{endpointId}/activate": {
      "post": {
        "tags": [
          "Endpoints"
        ],
        "summary": "Activate endpoint",
        "description": "Activates an endpoint for subsequent use in twin service. All endpoints must be activated using this API or through a activation filter during application registration or discovery.",
        "operationId": "ActivateEndpoint",
        "parameters": [
          {
            "in": "path",
            "name": "endpointId",
            "description": "endpoint identifier",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/endpoints/{endpointId}": {
      "get": {
        "tags": [
          "Endpoints"
        ],
        "summary": "Get endpoint information",
        "description": "Gets information about an endpoint.",
        "operationId": "GetEndpoint",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "endpointId",
            "description": "endpoint identifier",
            "required": true,
            "type": "string"
          },
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/EndpointInfoApiModel"
            }
          }
        }
      }
    },
    "/registry/v2/endpoints": {
      "get": {
        "tags": [
          "Endpoints"
        ],
        "summary": "Get list of endpoints",
        "description": "Get all registered endpoints in paged form. The returned model can contain a continuation token if more results are available. Call this operation again using the token to retrieve more results.",
        "operationId": "GetListOfEndpoints",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "continuationToken",
            "description": "Optional Continuation token",
            "type": "string"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Optional number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/EndpointInfoListApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "continuationToken"
        }
      }
    },
    "/registry/v2/endpoints/query": {
      "post": {
        "tags": [
          "Endpoints"
        ],
        "summary": "Query endpoints",
        "description": "Return endpoints that match the specified query. The returned model can contain a continuation token if more results are available. Call the GetListOfEndpoints operation using the token to retrieve more results.",
        "operationId": "QueryEndpoints",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Optional number of results to return",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Query to match",
            "required": true,
            "schema": {
              "$ref": "#/definitions/EndpointRegistrationQueryApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/EndpointInfoListApiModel"
            }
          }
        }
      },
      "get": {
        "tags": [
          "Endpoints"
        ],
        "summary": "Get filtered list of endpoints",
        "description": "Get a list of endpoints filtered using the specified query parameters. The returned model can contain a continuation token if more results are available. Call the GetListOfEndpoints operation using the token to retrieve more results.",
        "operationId": "GetFilteredListOfEndpoints",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "url",
            "description": "Endoint url for direct server access",
            "type": "string"
          },
          {
            "in": "query",
            "name": "certificate",
            "description": "Endpoint certificate thumbprint",
            "type": "string"
          },
          {
            "in": "query",
            "name": "securityMode",
            "description": "Security Mode",
            "type": "string",
            "enum": [
              "Best",
              "Sign",
              "SignAndEncrypt",
              "None"
            ],
            "x-ms-enum": {
              "name": "SecurityMode",
              "modelAsString": false
            }
          },
          {
            "in": "query",
            "name": "securityPolicy",
            "description": "Security policy uri",
            "type": "string"
          },
          {
            "in": "query",
            "name": "activated",
            "description": "Whether the endpoint was activated",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "connected",
            "description": "Whether the endpoint is connected on supervisor.",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "endpointState",
            "description": "The last state of the the activated endpoint",
            "type": "string",
            "enum": [
              "Connecting",
              "NotReachable",
              "Busy",
              "NoTrust",
              "CertificateInvalid",
              "Ready",
              "Error",
              "Disconnected",
              "Unauthorized"
            ],
            "x-ms-enum": {
              "name": "EndpointConnectivityState",
              "modelAsString": false
            }
          },
          {
            "in": "query",
            "name": "includeNotSeenSince",
            "description": "Whether to include endpoints that were soft deleted",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "discovererId",
            "description": "Discoverer id to filter with",
            "type": "string"
          },
          {
            "in": "query",
            "name": "applicationId",
            "description": "Application id to filter",
            "type": "string"
          },
          {
            "in": "query",
            "name": "supervisorId",
            "description": "Supervisor id to filter with",
            "type": "string"
          },
          {
            "in": "query",
            "name": "siteOrGatewayId",
            "description": "Site or gateway id to filter with",
            "type": "string"
          },
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Optional number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/EndpointInfoListApiModel"
            }
          }
        }
      }
    },
    "/registry/v2/endpoints/{endpointId}/deactivate": {
      "post": {
        "tags": [
          "Endpoints"
        ],
        "summary": "Deactivate endpoint",
        "description": "Deactivates the endpoint and disable access through twin service.",
        "operationId": "DeactivateEndpoint",
        "parameters": [
          {
            "in": "path",
            "name": "endpointId",
            "description": "endpoint identifier",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/gateways/{GatewayId}": {
      "get": {
        "tags": [
          "Gateways"
        ],
        "summary": "Get Gateway registration information",
        "description": "Returns a Gateway's registration and connectivity information. A Gateway id corresponds to the twin modules module identity.",
        "operationId": "GetGateway",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "GatewayId",
            "description": "Gateway identifier",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/GatewayInfoApiModel"
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Gateways"
        ],
        "summary": "Update Gateway configuration",
        "description": "Allows a caller to configure operations on the Gateway module identified by the Gateway id.",
        "operationId": "UpdateGateway",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "GatewayId",
            "description": "Gateway identifier",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Patch request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/GatewayUpdateApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/gateways": {
      "get": {
        "tags": [
          "Gateways"
        ],
        "summary": "Get list of Gateways",
        "description": "Get all registered Gateways and therefore twin modules in paged form. The returned model can contain a continuation token if more results are available. Call this operation again using the token to retrieve more results.",
        "operationId": "GetListOfGateway",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "continuationToken",
            "description": "Optional Continuation token",
            "type": "string"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Optional number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/GatewayListApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "continuationToken"
        }
      }
    },
    "/registry/v2/gateways/query": {
      "post": {
        "tags": [
          "Gateways"
        ],
        "summary": "Query Gateways",
        "description": "Get all Gateways that match a specified query. The returned model can contain a continuation token if more results are available. Call the GetListOfGateway operation using the token to retrieve more results.",
        "operationId": "QueryGateway",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "pageSize",
            "description": "Number of results to return",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Gateway query model",
            "required": true,
            "schema": {
              "$ref": "#/definitions/GatewayQueryApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/GatewayListApiModel"
            }
          }
        }
      },
      "get": {
        "tags": [
          "Gateways"
        ],
        "summary": "Get filtered list of Gateways",
        "description": "Get a list of Gateways filtered using the specified query parameters. The returned model can contain a continuation token if more results are available. Call the GetListOfGateway operation using the token to retrieve more results.",
        "operationId": "GetFilteredListOfGateway",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "siteId",
            "description": "Site of the Gateway",
            "type": "string"
          },
          {
            "in": "query",
            "name": "connected",
            "description": "Included connected or disconnected",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/GatewayListApiModel"
            }
          }
        }
      }
    },
    "/registry/v2/publishers/{publisherId}": {
      "get": {
        "tags": [
          "Publishers"
        ],
        "summary": "Get publisher registration information",
        "description": "Returns a publisher's registration and connectivity information. A publisher id corresponds to the twin modules module identity.",
        "operationId": "GetPublisher",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "publisherId",
            "description": "Publisher identifier",
            "required": true,
            "type": "string"
          },
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/PublisherApiModel"
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Publishers"
        ],
        "summary": "Update publisher configuration",
        "description": "Allows a caller to configure operations on the publisher module identified by the publisher id.",
        "operationId": "UpdatePublisher",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "publisherId",
            "description": "Publisher identifier",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Patch request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PublisherUpdateApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/publishers": {
      "get": {
        "tags": [
          "Publishers"
        ],
        "summary": "Get list of publishers",
        "description": "Get all registered publishers and therefore twin modules in paged form. The returned model can contain a continuation token if more results are available. Call this operation again using the token to retrieve more results.",
        "operationId": "GetListOfPublisher",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "continuationToken",
            "description": "Optional Continuation token",
            "type": "string"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Optional number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/PublisherListApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "continuationToken"
        }
      }
    },
    "/registry/v2/publishers/query": {
      "post": {
        "tags": [
          "Publishers"
        ],
        "summary": "Query publishers",
        "description": "Get all publishers that match a specified query. The returned model can contain a continuation token if more results are available. Call the GetListOfPublisher operation using the token to retrieve more results.",
        "operationId": "QueryPublisher",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Number of results to return",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Publisher query model",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PublisherQueryApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/PublisherListApiModel"
            }
          }
        }
      },
      "get": {
        "tags": [
          "Publishers"
        ],
        "summary": "Get filtered list of publishers",
        "description": "Get a list of publishers filtered using the specified query parameters. The returned model can contain a continuation token if more results are available. Call the GetListOfPublisher operation using the token to retrieve more results.",
        "operationId": "GetFilteredListOfPublisher",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "siteId",
            "description": "Site for the publishers",
            "type": "string"
          },
          {
            "in": "query",
            "name": "connected",
            "description": "Included connected or disconnected",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/PublisherListApiModel"
            }
          }
        }
      }
    },
    "/registry/v2/supervisors/{supervisorId}": {
      "get": {
        "tags": [
          "Supervisors"
        ],
        "summary": "Get supervisor registration information",
        "description": "Returns a supervisor's registration and connectivity information. A supervisor id corresponds to the twin modules module identity.",
        "operationId": "GetSupervisor",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "supervisorId",
            "description": "Supervisor identifier",
            "required": true,
            "type": "string"
          },
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SupervisorApiModel"
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Supervisors"
        ],
        "summary": "Update supervisor information",
        "description": "Allows a caller to configure recurring discovery runs on the twin module identified by the supervisor id or update site information.",
        "operationId": "UpdateSupervisor",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "supervisorId",
            "description": "supervisor identifier",
            "required": true,
            "type": "string"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Patch request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/SupervisorUpdateApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/supervisors/{supervisorId}/status": {
      "get": {
        "tags": [
          "Supervisors"
        ],
        "summary": "Get runtime status of supervisor",
        "description": "Allows a caller to get runtime status for a supervisor.",
        "operationId": "GetSupervisorStatus",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "path",
            "name": "supervisorId",
            "description": "supervisor identifier",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SupervisorStatusApiModel"
            }
          }
        }
      }
    },
    "/registry/v2/supervisors/{supervisorId}/reset": {
      "post": {
        "tags": [
          "Supervisors"
        ],
        "summary": "Reset supervisor",
        "description": "Allows a caller to reset the twin module using its supervisor identity identifier.",
        "operationId": "ResetSupervisor",
        "parameters": [
          {
            "in": "path",
            "name": "supervisorId",
            "description": "supervisor identifier",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/registry/v2/supervisors": {
      "get": {
        "tags": [
          "Supervisors"
        ],
        "summary": "Get list of supervisors",
        "description": "Get all registered supervisors and therefore twin modules in paged form. The returned model can contain a continuation token if more results are available. Call this operation again using the token to retrieve more results.",
        "operationId": "GetListOfSupervisors",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "continuationToken",
            "description": "Optional Continuation token",
            "type": "string"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Optional number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SupervisorListApiModel"
            }
          }
        },
        "x-ms-pageable": {
          "nextLinkName": "continuationToken"
        }
      }
    },
    "/registry/v2/supervisors/query": {
      "post": {
        "tags": [
          "Supervisors"
        ],
        "summary": "Query supervisors",
        "description": "Get all supervisors that match a specified query. The returned model can contain a continuation token if more results are available. Call the GetListOfSupervisors operation using the token to retrieve more results.",
        "operationId": "QuerySupervisors",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json",
          "application/x-msgpack"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Number of results to return",
            "type": "integer",
            "format": "int32"
          },
          {
            "in": "body",
            "name": "body",
            "description": "Supervisors query model",
            "required": true,
            "schema": {
              "$ref": "#/definitions/SupervisorQueryApiModel"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SupervisorListApiModel"
            }
          }
        }
      },
      "get": {
        "tags": [
          "Supervisors"
        ],
        "summary": "Get filtered list of supervisors",
        "description": "Get a list of supervisors filtered using the specified query parameters. The returned model can contain a continuation token if more results are available. Call the GetListOfSupervisors operation using the token to retrieve more results.",
        "operationId": "GetFilteredListOfSupervisors",
        "produces": [
          "text/plain",
          "application/json",
          "text/json",
          "application/x-msgpack"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "siteId",
            "description": "Site for the supervisors",
            "type": "string"
          },
          {
            "in": "query",
            "name": "endpointId",
            "description": "Managing provided endpoint twin",
            "type": "string"
          },
          {
            "in": "query",
            "name": "connected",
            "description": "Included connected or disconnected",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "onlyServerState",
            "description": "Whether to include only server state, or display current client state of the endpoint if available",
            "type": "boolean"
          },
          {
            "in": "query",
            "name": "pageSize",
            "description": "Number of results to return",
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SupervisorListApiModel"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "SecurityMode": {
      "description": "Security mode of endpoint",
      "enum": [
        "Best",
        "Sign",
        "SignAndEncrypt",
        "None"
      ],
      "type": "string",
      "x-ms-enum": {
        "name": "SecurityMode",
        "modelAsString": false
      }
    },
    "EndpointActivationFilterApiModel": {
      "description": "Endpoint Activation Filter model",
      "type": "object",
      "properties": {
        "trustLists": {
          "description": "Certificate trust list identifiers to use for\r\nactivation, if null, all certificates are\r\ntrusted.  If empty list, no certificates are\r\ntrusted which is equal to no filter.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "securityPolicies": {
          "description": "Endpoint security policies to filter against.\r\nIf set to null, all policies are in scope.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "securityMode": {
          "$ref": "#/definitions/SecurityMode"
        }
      }
    },
    "ServerRegistrationRequestApiModel": {
      "description": "Server registration request",
      "required": [
        "discoveryUrl"
      ],
      "type": "object",
      "properties": {
        "discoveryUrl": {
          "description": "Discovery url to use for registration",
          "type": "string"
        },
        "id": {
          "description": "Registration id",
          "type": "string"
        },
        "activationFilter": {
          "$ref": "#/definitions/EndpointActivationFilterApiModel"
        }
      }
    },
    "ApplicationType": {
      "description": "Application type",
      "enum": [
        "Server",
        "Client",
        "ClientAndServer",
        "DiscoveryServer"
      ],
      "type": "string",
      "x-ms-enum": {
        "name": "ApplicationType",
        "modelAsString": false
      }
    },
    "ApplicationRegistrationRequestApiModel": {
      "description": "Application information",
      "required": [
        "applicationUri"
      ],
      "type": "object",
      "properties": {
        "applicationUri": {
          "description": "Unique application uri",
          "type": "string"
        },
        "applicationType": {
          "$ref": "#/definitions/ApplicationType"
        },
        "productUri": {
          "description": "Product uri of the application.",
          "type": "string",
          "example": "http://contoso.com/fridge/1.0"
        },
        "applicationName": {
          "description": "Default name of the server or client.",
          "type": "string"
        },
        "locale": {
          "description": "Locale of default name",
          "type": "string"
        },
        "siteId": {
          "description": "Site of the application",
          "type": "string"
        },
        "localizedNames": {
          "description": "Localized names key off locale id.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "capabilities": {
          "description": "The OPC UA defined capabilities of the server.",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "discoveryUrls": {
          "description": "Discovery urls of the server.",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "discoveryProfileUri": {
          "description": "The discovery profile uri of the server.",
          "type": "string"
        },
        "gatewayServerUri": {
          "description": "Gateway server uri",
          "type": "string"
        }
      }
    },
    "ApplicationRegistrationResponseApiModel": {
      "description": "Result of an application registration",
      "type": "object",
      "properties": {
        "id": {
          "description": "New id application was registered under",
          "type": "string"
        }
      }
    },
    "RegistryOperationApiModel": {
      "description": "Registry operation log model",
      "required": [
        "authorityId",
        "time"
      ],
      "type": "object",
      "properties": {
        "authorityId": {
          "description": "Operation User",
          "type": "string"
        },
        "time": {
          "format": "date-time",
          "description": "Operation time",
          "type": "string"
        }
      }
    },
    "ApplicationInfoApiModel": {
      "description": "Application info model",
      "type": "object",
      "properties": {
        "applicationId": {
          "description": "Unique application id",
          "type": "string"
        },
        "applicationType": {
          "$ref": "#/definitions/ApplicationType"
        },
        "applicationUri": {
          "description": "Unique application uri",
          "type": "string"
        },
        "productUri": {
          "description": "Product uri",
          "type": "string"
        },
        "applicationName": {
          "description": "Default name of application",
          "type": "string"
        },
        "locale": {
          "description": "Locale of default name - defaults to \"en\"",
          "type": "string"
        },
        "localizedNames": {
          "description": "Localized Names of application keyed on locale",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "capabilities": {
          "description": "The capabilities advertised by the server.",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "discoveryUrls": {
          "description": "Discovery urls of the server",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "discoveryProfileUri": {
          "description": "Discovery profile uri",
          "type": "string"
        },
        "gatewayServerUri": {
          "description": "Gateway server uri",
          "type": "string"
        },
        "hostAddresses": {
          "description": "Host addresses of server application or null",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "siteId": {
          "description": "Site of the application",
          "type": "string",
          "example": "productionlineA"
        },
        "discovererId": {
          "description": "Discoverer that registered the application",
          "type": "string"
        },
        "notSeenSince": {
          "format": "date-time",
          "description": "Last time application was seen",
          "type": "string"
        },
        "created": {
          "$ref": "#/definitions/RegistryOperationApiModel"
        },
        "updated": {
          "$ref": "#/definitions/RegistryOperationApiModel"
        }
      }
    },
    "ApplicationInfoListApiModel": {
      "description": "List of registered applications",
      "type": "object",
      "properties": {
        "items": {
          "description": "Application infos",
          "type": "array",
          "items": {
            "$ref": "#/definitions/ApplicationInfoApiModel"
          }
        },
        "continuationToken": {
          "description": "Continuation or null if final",
          "type": "string"
        }
      }
    },
    "DiscoveryMode": {
      "description": "Discovery mode to use",
      "enum": [
        "Off",
        "Local",
        "Network",
        "Fast",
        "Scan"
      ],
      "type": "string",
      "x-ms-enum": {
        "name": "DiscoveryMode",
        "modelAsString": false
      }
    },
    "DiscoveryConfigApiModel": {
      "description": "Discovery configuration api model",
      "type": "object",
      "properties": {
        "addressRangesToScan": {
          "description": "Address ranges to scan (null == all wired nics)",
          "type": "string"
        },
        "networkProbeTimeout": {
          "format": "date-span",
          "description": "Network probe timeout",
          "type": "string"
        },
        "maxNetworkProbes": {
          "format": "int32",
          "description": "Max network probes that should ever run.",
          "type": "integer"
        },
        "portRangesToScan": {
          "description": "Port ranges to scan (null == all unassigned)",
          "type": "string"
        },
        "portProbeTimeout": {
          "format": "date-span",
          "description": "Port probe timeout",
          "type": "string"
        },
        "maxPortProbes": {
          "format": "int32",
          "description": "Max port probes that should ever run.",
          "type": "integer"
        },
        "minPortProbesPercent": {
          "format": "int32",
          "description": "Probes that must always be there as percent of max.",
          "type": "integer"
        },
        "idleTimeBetweenScans": {
          "format": "date-span",
          "description": "Delay time between discovery sweeps",
          "type": "string"
        },
        "discoveryUrls": {
          "description": "List of preset discovery urls to use",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "locales": {
          "description": "List of locales to filter with during discovery",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "activationFilter": {
          "$ref": "#/definitions/EndpointActivationFilterApiModel"
        }
      }
    },
    "DiscoveryRequestApiModel": {
      "description": "Discovery request",
      "type": "object",
      "properties": {
        "id": {
          "description": "Id of discovery request",
          "type": "string"
        },
        "discovery": {
          "$ref": "#/definitions/DiscoveryMode"
        },
        "configuration": {
          "$ref": "#/definitions/DiscoveryConfigApiModel"
        }
      }
    },
    "EndpointApiModel": {
      "description": "Endpoint model",
      "type": "object",
      "properties": {
        "url": {
          "description": "Endpoint url to use to connect with",
          "type": "string"
        },
        "alternativeUrls": {
          "description": "Alternative endpoint urls that can be used for\r\naccessing and validating the server",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "securityMode": {
          "$ref": "#/definitions/SecurityMode"
        },
        "securityPolicy": {
          "description": "Security policy uri to use for communication.\r\ndefault to best.",
          "type": "string"
        },
        "certificate": {
          "description": "Endpoint certificate thumbprint",
          "type": "string"
        }
      }
    },
    "CredentialType": {
      "description": "Type of credentials to use for authentication",
      "enum": [
        "None",
        "UserName",
        "X509Certificate",
        "JwtToken"
      ],
      "type": "string",
      "x-ms-enum": {
        "name": "CredentialType",
        "modelAsString": false
      }
    },
    "AuthenticationMethodApiModel": {
      "description": "Authentication Method model",
      "required": [
        "id"
      ],
      "type": "object",
      "properties": {
        "id": {
          "description": "Method id",
          "type": "string"
        },
        "credentialType": {
          "$ref": "#/definitions/CredentialType"
        },
        "securityPolicy": {
          "description": "Security policy to use when passing credential.",
          "type": "string"
        },
        "configuration": {
          "description": "Method specific configuration"
        }
      }
    },
    "EndpointRegistrationApiModel": {
      "description": "Endpoint registration model",
      "required": [
        "id"
      ],
      "type": "object",
      "properties": {
        "id": {
          "description": "Registered identifier of the endpoint",
          "type": "string"
        },
        "endpointUrl": {
          "description": "Original endpoint url of the endpoint",
          "type": "string"
        },
        "siteId": {
          "description": "Registered site of the endpoint",
          "type": "string"
        },
        "supervisorId": {
          "description": "Supervisor that can manage the endpoint.",
          "type": "string"
        },
        "discovererId": {
          "description": "Discoverer that registered the endpoint",
          "type": "string"
        },
        "endpoint": {
          "$ref": "#/definitions/EndpointApiModel"
        },
        "securityLevel": {
          "format": "int32",
          "description": "Security level of the endpoint",
          "type": "integer"
        },
        "authenticationMethods": {
          "description": "Supported authentication methods that can be selected to\r\nobtain a credential and used to interact with the endpoint.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/AuthenticationMethodApiModel"
          }
        }
      }
    },
    "ApplicationRegistrationApiModel": {
      "description": "Application with optional list of endpoints",
      "required": [
        "application"
      ],
      "type": "object",
      "properties": {
        "application": {
          "$ref": "#/definitions/ApplicationInfoApiModel"
        },
        "endpoints": {
          "description": "List of endpoint twins",
          "type": "array",
          "items": {
            "$ref": "#/definitions/EndpointRegistrationApiModel"
          }
        }
      }
    },
    "ApplicationRegistrationUpdateApiModel": {
      "description": "Application registration update request",
      "type": "object",
      "properties": {
        "productUri": {
          "description": "Product uri",
          "type": "string"
        },
        "applicationName": {
          "description": "Default name of the server or client.",
          "type": "string"
        },
        "locale": {
          "description": "Locale of default name - defaults to \"en\"",
          "type": "string"
        },
        "localizedNames": {
          "description": "Localized names keyed off locale id.\r\nTo remove entry, set value for locale id to null.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "capabilities": {
          "description": "Capabilities of the application",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "discoveryUrls": {
          "description": "Discovery urls of the application",
          "uniqueItems": true,
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "discoveryProfileUri": {
          "description": "Discovery profile uri",
          "type": "string"
        },
        "gatewayServerUri": {
          "description": "Gateway server uri",
          "type": "string"
        }
      }
    },
    "ApplicationSiteListApiModel": {
      "description": "List of application sites",
      "type": "object",
      "properties": {
        "sites": {
          "description": "Sites",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "continuationToken": {
          "description": "Continuation or null if final",
          "type": "string"
        }
      }
    },
    "ApplicationRegistrationQueryApiModel": {
      "description": "Application information",
      "type": "object",
      "properties": {
        "applicationType": {
          "$ref": "#/definitions/ApplicationType"
        },
        "applicationUri": {
          "description": "Application uri",
          "type": "string"
        },
        "productUri": {
          "description": "Product uri",
          "type": "string"
        },
        "applicationName": {
          "description": "Name of application",
          "type": "string"
        },
        "locale": {
          "description": "Locale of application name - default is \"en\"",
          "type": "string"
        },
        "capability": {
          "description": "Application capability to query with",
          "type": "string"
        },
        "discoveryProfileUri": {
          "description": "Discovery profile uri",
          "type": "string"
        },
        "gatewayServerUri": {
          "description": "Gateway server uri",
          "type": "string"
        },
        "siteOrGatewayId": {
          "description": "Supervisor or site the application belongs to.",
          "type": "string"
        },
        "includeNotSeenSince": {
          "description": "Whether to include apps that were soft deleted",
          "type": "boolean"
        },
        "discovererId": {
          "description": "Discoverer id to filter with",
          "type": "string"
        }
      }
    },
    "TraceLogLevel": {
      "description": "Log level",
      "enum": [
        "Error",
        "Information",
        "Debug",
        "Verbose"
      ],
      "type": "string",
      "x-ms-enum": {
        "name": "TraceLogLevel",
        "modelAsString": false
      }
    },
    "DiscovererApiModel": {
      "description": "Discoverer registration model",
      "required": [
        "id"
      ],
      "type": "object",
      "properties": {
        "id": {
          "description": "Discoverer id",
          "type": "string"
        },
        "siteId": {
          "description": "Site of the discoverer",
          "type": "string"
        },
        "discovery": {
          "$ref": "#/definitions/DiscoveryMode"
        },
        "discoveryConfig": {
          "$ref": "#/definitions/DiscoveryConfigApiModel"
        },
        "requestedMode": {
          "$ref": "#/definitions/DiscoveryMode"
        },
        "requestedConfig": {
          "$ref": "#/definitions/DiscoveryConfigApiModel"
        },
        "logLevel": {
          "$ref": "#/definitions/TraceLogLevel"
        },
        "outOfSync": {
          "description": "Whether the registration is out of sync between\r\nclient (module) and server (service) (default: false).",
          "type": "boolean"
        },
        "connected": {
          "description": "Whether discoverer is connected on this registration",
          "type": "boolean"
        }
      }
    },
    "DiscovererUpdateApiModel": {
      "description": "Discoverer update request",
      "type": "object",
      "properties": {
        "siteId": {
          "description": "Site the discoverer is part of",
          "type": "string"
        },
        "discovery": {
          "$ref": "#/definitions/DiscoveryMode"
        },
        "discoveryConfig": {
          "$ref": "#/definitions/DiscoveryConfigApiModel"
        },
        "logLevel": {
          "$ref": "#/definitions/TraceLogLevel"
        }
      }
    },
    "DiscovererListApiModel": {
      "description": "Discoverer registration list",
      "type": "object",
      "properties": {
        "items": {
          "description": "Registrations",
          "type": "array",
          "items": {
            "$ref": "#/definitions/DiscovererApiModel"
          }
        },
        "continuationToken": {
          "description": "Continuation or null if final",
          "type": "string"
        }
      }
    },
    "DiscovererQueryApiModel": {
      "description": "Discoverer registration query",
      "type": "object",
      "properties": {
        "siteId": {
          "description": "Site of the discoverer",
          "type": "string"
        },
        "discovery": {
          "$ref": "#/definitions/DiscoveryMode"
        },
        "connected": {
          "description": "Included connected or disconnected",
          "type": "boolean"
        }
      }
    },
    "X509CertificateApiModel": {
      "description": "Certificate model",
      "type": "object",
      "properties": {
        "subject": {
          "description": "Subject",
          "type": "string"
        },
        "thumbprint": {
          "description": "Thumbprint",
          "type": "string"
        },
        "serialNumber": {
          "description": "Serial number",
          "type": "string"
        },
        "notBeforeUtc": {
          "format": "date-time",
          "description": "Not before validity",
          "type": "string"
        },
        "notAfterUtc": {
          "format": "date-time",
          "description": "Not after validity",
          "type": "string"
        },
        "selfSigned": {
          "description": "Self signed",
          "type": "boolean"
        },
        "certificate": {
          "format": "byte",
          "description": "Raw data",
          "type": "string"
        }
      }
    },
    "X509ChainStatus": {
      "description": "Status of x509 chain",
      "enum": [
        "NoError",
        "NotTimeValid",
        "Revoked",
        "NotSignatureValid",
        "NotValidForUsage",
        "UntrustedRoot",
        "RevocationStatusUnknown",
        "Cyclic",
        "InvalidExtension",
        "InvalidPolicyConstraints",
        "InvalidBasicConstraints",
        "InvalidNameConstraints",
        "HasNotSupportedNameConstraint",
        "HasNotDefinedNameConstraint",
        "HasNotPermittedNameConstraint",
        "HasExcludedNameConstraint",
        "PartialChain",
        "CtlNotTimeValid",
        "CtlNotSignatureValid",
        "CtlNotValidForUsage",
        "HasWeakSignature",
        "OfflineRevocation",
        "NoIssuanceChainPolicy",
        "ExplicitDistrust",
        "HasNotSupportedCriticalExtension"
      ],
      "type": "string",
      "x-ms-enum": {
        "name": "X509ChainStatus",
        "modelAsString": false
      }
    },
    "X509CertificateChainApiModel": {
      "description": "Certificate chain",
      "type": "object",
      "properties": {
        "chain": {
          "description": "Chain",
          "type": "array",
          "items": {
            "$ref": "#/definitions/X509CertificateApiModel"
          }
        },
        "status": {
          "description": "Chain validation status if validated",
          "enum": [
            "NoError",
            "NotTimeValid",
            "Revoked",
            "NotSignatureValid",
            "NotValidForUsage",
            "UntrustedRoot",
            "RevocationStatusUnknown",
            "Cyclic",
            "InvalidExtension",
            "InvalidPolicyConstraints",
            "InvalidBasicConstraints",
            "InvalidNameConstraints",
            "HasNotSupportedNameConstraint",
            "HasNotDefinedNameConstraint",
            "HasNotPermittedNameConstraint",
            "HasExcludedNameConstraint",
            "PartialChain",
            "CtlNotTimeValid",
            "CtlNotSignatureValid",
            "CtlNotValidForUsage",
            "HasWeakSignature",
            "OfflineRevocation",
            "NoIssuanceChainPolicy",
            "ExplicitDistrust",
            "HasNotSupportedCriticalExtension"
          ],
          "type": "string",
          "items": {
            "$ref": "#/definitions/X509ChainStatus"
          },
          "x-ms-enum": {
            "name": "X509ChainStatus",
            "modelAsString": false
          }
        }
      }
    },
    "EndpointActivationState": {
      "description": "Activation state of the endpoint twin",
      "enum": [
        "Deactivated",
        "Activated",
        "ActivatedAndConnected"
      ],
      "type": "string",
      "x-ms-enum": {
        "name": "EndpointActivationState",
        "modelAsString": false
      }
    },
    "EndpointConnectivityState": {
      "description": "State of the endpoint after activation",
      "enum": [
        "Connecting",
        "NotReachable",
        "Busy",
        "NoTrust",
        "CertificateInvalid",
        "Ready",
        "Error",
        "Disconnected",
        "Unauthorized"
      ],
      "type": "string",
      "x-ms-enum": {
        "name": "EndpointConnectivityState",
        "modelAsString": false
      }
    },
    "EndpointInfoApiModel": {
      "description": "Endpoint registration model",
      "required": [
        "applicationId",
        "registration"
      ],
      "type": "object",
      "properties": {
        "registration": {
          "$ref": "#/definitions/EndpointRegistrationApiModel"
        },
        "applicationId": {
          "description": "Application id endpoint is registered under.",
          "type": "string"
        },
        "activationState": {
          "$ref": "#/definitions/EndpointActivationState"
        },
        "endpointState": {
          "$ref": "#/definitions/EndpointConnectivityState"
        },
        "outOfSync": {
          "description": "Whether the registration is out of sync",
          "type": "boolean"
        },
        "notSeenSince": {
          "format": "date-time",
          "description": "Last time endpoint was seen",
          "type": "string"
        }
      }
    },
    "EndpointInfoListApiModel": {
      "description": "Endpoint registration list",
      "type": "object",
      "properties": {
        "items": {
          "description": "Endpoint registrations",
          "type": "array",
          "items": {
            "$ref": "#/definitions/EndpointInfoApiModel"
          }
        },
        "continuationToken": {
          "description": "Continuation or null if final",
          "type": "string"
        }
      }
    },
    "EndpointRegistrationQueryApiModel": {
      "description": "Endpoint query",
      "type": "object",
      "properties": {
        "url": {
          "description": "Endoint url for direct server access",
          "type": "string"
        },
        "certificate": {
          "description": "Endpoint certificate thumbprint",
          "type": "string"
        },
        "securityMode": {
          "$ref": "#/definitions/SecurityMode"
        },
        "securityPolicy": {
          "description": "Security policy uri",
          "type": "string"
        },
        "activated": {
          "description": "Whether the endpoint was activated",
          "type": "boolean"
        },
        "connected": {
          "description": "Whether the endpoint is connected on supervisor.",
          "type": "boolean"
        },
        "endpointState": {
          "$ref": "#/definitions/EndpointConnectivityState"
        },
        "includeNotSeenSince": {
          "description": "Whether to include endpoints that were soft deleted",
          "type": "boolean"
        },
        "discovererId": {
          "description": "Discoverer id to filter with",
          "type": "string"
        },
        "applicationId": {
          "description": "Application id to filter",
          "type": "string"
        },
        "supervisorId": {
          "description": "Supervisor id to filter with",
          "type": "string"
        },
        "siteOrGatewayId": {
          "description": "Site or gateway id to filter with",
          "type": "string"
        }
      }
    },
    "GatewayApiModel": {
      "description": "Gateway registration model",
      "required": [
        "id"
      ],
      "type": "object",
      "properties": {
        "id": {
          "description": "Gateway id",
          "type": "string"
        },
        "siteId": {
          "description": "Site of the Gateway",
          "type": "string"
        },
        "connected": {
          "description": "Whether Gateway is connected on this registration",
          "type": "boolean"
        }
      }
    },
    "SupervisorApiModel": {
      "description": "Supervisor registration model",
      "required": [
        "id"
      ],
      "type": "object",
      "properties": {
        "id": {
          "description": "Supervisor id",
          "type": "string"
        },
        "siteId": {
          "description": "Site of the supervisor",
          "type": "string"
        },
        "logLevel": {
          "$ref": "#/definitions/TraceLogLevel"
        },
        "outOfSync": {
          "description": "Whether the registration is out of sync between\r\nclient (module) and server (service) (default: false).",
          "type": "boolean"
        },
        "connected": {
          "description": "Whether supervisor is connected on this registration",
          "type": "boolean"
        }
      }
    },
    "PublisherConfigApiModel": {
      "description": "Default publisher agent configuration",
      "type": "object",
      "properties": {
        "capabilities": {
          "description": "Capabilities",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "jobCheckInterval": {
          "format": "date-span",
          "description": "Interval to check job",
          "type": "string"
        },
        "heartbeatInterval": {
          "format": "date-span",
          "description": "Heartbeat interval",
          "type": "string"
        },
        "maxWorkers": {
          "format": "int32",
          "description": "Parallel jobs",
          "type": "integer"
        },
        "jobOrchestratorUrl": {
          "description": "Job orchestrator endpoint url",
          "type": "string"
        }
      }
    },
    "PublisherApiModel": {
      "description": "Publisher registration model",
      "required": [
        "id"
      ],
      "type": "object",
      "properties": {
        "id": {
          "description": "Publisher id",
          "type": "string"
        },
        "siteId": {
          "description": "Site of the publisher",
          "type": "string"
        },
        "logLevel": {
          "$ref": "#/definitions/TraceLogLevel"
        },
        "configuration": {
          "$ref": "#/definitions/PublisherConfigApiModel"
        },
        "outOfSync": {
          "description": "Whether the registration is out of sync between\r\nclient (module) and server (service) (default: false).",
          "type": "boolean"
        },
        "connected": {
          "description": "Whether publisher is connected on this registration",
          "type": "boolean"
        }
      }
    },
    "GatewayModulesApiModel": {
      "description": "Gateway modules model",
      "type": "object",
      "properties": {
        "supervisor": {
          "$ref": "#/definitions/SupervisorApiModel"
        },
        "publisher": {
          "$ref": "#/definitions/PublisherApiModel"
        },
        "discoverer": {
          "$ref": "#/definitions/DiscovererApiModel"
        }
      }
    },
    "GatewayInfoApiModel": {
      "description": "Gateway info model",
      "required": [
        "gateway"
      ],
      "type": "object",
      "properties": {
        "gateway": {
          "$ref": "#/definitions/GatewayApiModel"
        },
        "modules": {
          "$ref": "#/definitions/GatewayModulesApiModel"
        }
      }
    },
    "GatewayUpdateApiModel": {
      "description": "Gateway registration update request",
      "type": "object",
      "properties": {
        "siteId": {
          "description": "Site of the Gateway",
          "type": "string"
        }
      }
    },
    "GatewayListApiModel": {
      "description": "Gateway registration list",
      "type": "object",
      "properties": {
        "items": {
          "description": "Registrations",
          "type": "array",
          "items": {
            "$ref": "#/definitions/GatewayApiModel"
          }
        },
        "continuationToken": {
          "description": "Continuation or null if final",
          "type": "string"
        }
      }
    },
    "GatewayQueryApiModel": {
      "description": "Gateway registration query",
      "type": "object",
      "properties": {
        "siteId": {
          "description": "Site of the Gateway",
          "type": "string"
        },
        "connected": {
          "description": "Included connected or disconnected",
          "type": "boolean"
        }
      }
    },
    "PublisherUpdateApiModel": {
      "description": "Publisher registration update request",
      "type": "object",
      "properties": {
        "siteId": {
          "description": "Site of the publisher",
          "type": "string"
        },
        "configuration": {
          "$ref": "#/definitions/PublisherConfigApiModel"
        },
        "logLevel": {
          "$ref": "#/definitions/TraceLogLevel"
        }
      }
    },
    "PublisherListApiModel": {
      "description": "Publisher registration list",
      "type": "object",
      "properties": {
        "items": {
          "description": "Registrations",
          "type": "array",
          "items": {
            "$ref": "#/definitions/PublisherApiModel"
          }
        },
        "continuationToken": {
          "description": "Continuation or null if final",
          "type": "string"
        }
      }
    },
    "PublisherQueryApiModel": {
      "description": "Publisher registration query",
      "type": "object",
      "properties": {
        "siteId": {
          "description": "Site for the publishers",
          "type": "string"
        },
        "connected": {
          "description": "Included connected or disconnected",
          "type": "boolean"
        }
      }
    },
    "SupervisorUpdateApiModel": {
      "description": "Supervisor update request",
      "type": "object",
      "properties": {
        "siteId": {
          "description": "Site the supervisor is part of",
          "type": "string"
        },
        "logLevel": {
          "$ref": "#/definitions/TraceLogLevel"
        }
      }
    },
    "EndpointActivationStatusApiModel": {
      "description": "Endpoint Activation status model",
      "required": [
        "id"
      ],
      "type": "object",
      "properties": {
        "id": {
          "description": "Identifier of the endoint",
          "type": "string"
        },
        "activationState": {
          "$ref": "#/definitions/EndpointActivationState"
        }
      }
    },
    "SupervisorStatusApiModel": {
      "description": "Supervisor runtime status",
      "required": [
        "deviceId"
      ],
      "type": "object",
      "properties": {
        "deviceId": {
          "description": "Edge device id",
          "type": "string"
        },
        "moduleId": {
          "description": "Module id",
          "type": "string"
        },
        "siteId": {
          "description": "Site id",
          "type": "string"
        },
        "endpoints": {
          "description": "Endpoint activation status",
          "type": "array",
          "items": {
            "$ref": "#/definitions/EndpointActivationStatusApiModel"
          }
        }
      }
    },
    "SupervisorListApiModel": {
      "description": "Supervisor registration list",
      "type": "object",
      "properties": {
        "items": {
          "description": "Registrations",
          "type": "array",
          "items": {
            "$ref": "#/definitions/SupervisorApiModel"
          }
        },
        "continuationToken": {
          "description": "Continuation or null if final",
          "type": "string"
        }
      }
    },
    "SupervisorQueryApiModel": {
      "description": "Supervisor registration query",
      "type": "object",
      "properties": {
        "siteId": {
          "description": "Site for the supervisors",
          "type": "string"
        },
        "endpointId": {
          "description": "Managing provided endpoint twin",
          "type": "string"
        },
        "connected": {
          "description": "Included connected or disconnected",
          "type": "boolean"
        }
      }
    }
  },
  "securityDefinitions": {
    "bearer": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "Authorization token in the form of 'bearer <token>'"
    }
  },
  "tags": [
    {
      "name": "Applications",
      "description": "CRUD and Query application resources"
    },
    {
      "name": "Discovery",
      "description": "Configure discovery"
    },
    {
      "name": "Endpoints",
      "description": "Activate, Deactivate and Query endpoint resources"
    },
    {
      "name": "Gateways",
      "description": "Read, Update and Query Gateway resources"
    },
    {
      "name": "Publishers",
      "description": "Read, Update and Query publisher resources"
    },
    {
      "name": "Supervisors",
      "description": "Read, Update and Query supervisor resources"
    }
  ]
}