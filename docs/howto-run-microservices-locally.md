# Run the Azure Industrial IoT Microservices locally

[Home](readme.md)

The Industrial IoT Microservices contained in this repository provide a REST like API exposing the Industrial IoT Platform capabilities. 

## Prerequisites

Ensure you have deployed the Azure Platform dependencies for all Microservices in this repository and retrieved the resulting `.env` file.  If you have not, please follow the instructions at

* [How to deploy Azure dependencies](howto-deploy-dependencies.md)

If you have not done so yet, clone this GitHub repository.  To clone the repository you need git.  If you do not have git installed on your system, follow the instructions for [Linux or Mac](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git), or [Windows](https://gitforwindows.org/) to install it.  To clone the repository, open a command prompt or terminal and run:

```bash
git clone https://github.com/Azure/Industrial-IoT 
cd Industrial-IoT
```

## Build and run the Industrial IoT Microservices with Visual Studio or VS Code

1. First, make sure your development tool chain is setup to build the Microservices. If you have not, [install .NET Core 3.0+](https://dotnet.microsoft.com/download/dotnet-core/3.0) and 
   - [Visual Studio](https://visualstudio.microsoft.com/vs/).  On Windows Visual Studio 2019 16.3+ or on Mac [Visual Studio for MacOS](https://visualstudio.microsoft.com/vs/mac/) 8.3+.
   - Or latest version [Visual Studio Code](https://code.visualstudio.com/).  Ensure you have the [C# for Visual Studio Code (powered by OmniSharp)][omnisharp-url] extension installed.
2. Ensure that the `.env` file previously generated by the deployment script is located in the repository root.
3. Open the `Industrial-IoT.sln` solution file in Visual Studio or VS Code
4. Right click on the solution in the solution viewer and select `Properties`. 
5. Set the start up project to be  `Microsoft.Azure.IIoT.Services.All`.  
6. Start debugging by pressing the "Start" button or hitting F5.
7. [Ensure the Microservices are running](#Ensure-the-Microservices-are-running)

## Ensure the Microservices are running
After starting open a browser window to:

* http://localhost:9080/registry/swagger for OPC Registry Microservice
* http://localhost:9080/twin/swagger for OPC Twin Microservice
* http://localhost:9080/vault/swagger for OPC Historic Access Microservice

which will show you the each Microservice's swagger UI. If the services exit immediately after start, check that the `.env` file exists in the root of the repository.  

## Next steps

* Develop an Application that reads and writes Variables in an OPC UA Server (COMING SOON)
