pr:
  autoCancel: 'true'
  drafts: 'true'
  branches:
    include:
    - '*'
variables:
  system_accesstoken: $(System.AccessToken)
jobs:
- job: OneBranchTrigger
  pool:
    vmImage: 'ubuntu-latest'
  displayName: Trigger Pull Request Build on Governed Pipeline
  steps:
  - task: TriggerBuild@4
    inputs:
      definitionIsInCurrentTeamProject: true
      buildDefinition: 'Industrial-IoT-PullRequest'
      queueBuildForUserThatTriggeredBuild: false
      ignoreSslCertificateErrors: false
      useSameSourceVersion: false
      useCustomSourceVersion: false
      useSameBranch: false
      branchToUse: 'main'
      waitForQueuedBuildsToFinish: true
      waitForQueuedBuildsToFinishRefreshTime: '60'
      failTaskIfBuildsNotSuccessful: true
      cancelBuildsIfAnyFails: false
      treatPartiallySucceededBuildAsSuccessful: false
      downloadBuildArtifacts: false
      storeInEnvironmentVariable: false
      authenticationMethod: 'OAuth Token'
      enableBuildInQueueCondition: false
      dependentOnSuccessfulBuildCondition: false
      dependentOnFailedBuildCondition: false
      checkbuildsoncurrentbranch: false
      failTaskIfConditionsAreNotFulfilled: false
      templateParameters: 'ref: $(Build.SourceBranch)'
